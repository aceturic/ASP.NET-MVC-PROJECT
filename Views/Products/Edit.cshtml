@model ProductDto

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
<div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh;">
    <div class="col-md-6">
        <!-- Reduced width from 8 to 6 -->
        <div class="card border-0 shadow-lg p-4 rounded-4 custom-card">
            <h2 class="text-center mb-3 fw-bold text-primary custom-heading">Edit Product</h2>

            <form method="post" enctype="multipart/form-data">
                <div class="mb-2">
                    <label class="form-label fw-semibold">Product ID</label>
                    <input class="form-control-plaintext text-muted small-text" readonly value="@ViewData["ProductId"]">
                </div>

                <div class="mb-2 form-floating">
                    <input type="text" class="form-control custom-input" asp-for="Name" placeholder="Product Name">
                    <label class="custom-label">Product Name</label>
                    <span asp-validation-for="Name" class="text-danger"></span>
                </div>

                <div class="mb-2 form-floating">
                    <input type="text" class="form-control custom-input" asp-for="Brand" placeholder="Brand">
                    <label class="custom-label">Brand</label>
                    <span asp-validation-for="Brand" class="text-danger"></span>
                </div>

                <div class="mb-2">
                    <label class="form-label fw-semibold">Category</label>
                    <select class="form-select custom-input" asp-for="Category">
                        <option value="CPU">CPU</option>
                        <option value="MB">MB</option>
                        <option value="RAM">RAM</option>
                        <option value="SSD">SSD</option>
                        <option value="PSU">PSU</option>
                        <option value="GPU">GPU</option>
                        <option value="CASE">CASE</option>
                    </select>
                </div>

                <div class="mb-2 form-floating">
                    <input type="number" class="form-control custom-input" asp-for="Price" placeholder="Price">
                    <label class="custom-label">Price ($)</label>
                    <span asp-validation-for="Price" class="text-danger"></span>
                </div>

                <div class="mb-2 form-floating">
                    <textarea class="form-control custom-input small-textarea" asp-for="Description" placeholder="Description"></textarea>
                    <label class="custom-label">Description</label>
                    <span asp-validation-for="Description" class="text-danger"></span>
                </div>

                <div class="mb-2 form-floating">
                    <textarea class="form-control custom-input small-textarea" asp-for="Quantity" placeholder="Quantity"></textarea>
                    <label class="custom-label">Quantity</label>
                    <span asp-validation-for="Quantity" class="text-danger"></span>
                </div>

                <!-- Image Preview (Smaller) -->
                <div class="mb-2 text-center">
                    <label class="form-label fw-semibold">Current Image</label>
                    <br>
                    <img id="imagePreview" src="/products/@ViewData["ImageFileName"]"
                         class="rounded shadow-lg img-fluid custom-img">
                </div>

                <!-- File Upload with Preview -->
                <div class="mb-2">
                    <label class="form-label fw-semibold">Upload New Image</label>
                    <input type="file" class="form-control custom-input" asp-for="ImageFile" id="imageUpload">
                    <span asp-validation-for="ImageFile" class="text-danger"></span>
                </div>

                <div class="mb-2">
                    <label class="form-label fw-semibold">Created At</label>
                    <input class="form-control-plaintext text-muted small-text" readonly value="@ViewData["CreatedAt"]">
                </div>

                <!-- Buttons -->
                <div class="d-flex justify-content-center gap-3 mt-3">
                    <button type="submit" class="btn custom-btn px-4 py-2 rounded-pill shadow-sm">Save</button>
                    <a asp-controller="Products" asp-action="Index" class="btn custom-btn-outline px-4 py-2 rounded-pill shadow-sm">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Live Image Preview Script -->
<script>
    document.getElementById("imageUpload").addEventListener("change", function(event) {
        const reader = new FileReader();
        reader.onload = function() {
            const preview = document.getElementById("imagePreview");
            preview.src = reader.result;
            preview.style.opacity = "0";
            setTimeout(() => preview.style.opacity = "1", 200);
        };
        reader.readAsDataURL(event.target.files[0]);
    });
</script>

<!-- Stylish Compact UI Enhancements -->
<style>
    :root {
        --bg-light: #f8f9fa;
        --bg-dark: #121212;
        --card-light: rgba(255, 255, 255, 0.95);
        --card-dark: rgba(30, 30, 30, 0.95);
        --text-light: #333;
        --text-dark: #f8f9fa;
        --primary-light: #007bff;
        --primary-dark: #00c8ff;
        --label-light: #666;
        --label-dark: #bbb;
    }

    body {
        background-color: var(--bg-light);
        color: var(--text-light);
        transition: all 0.3s ease-in-out;
    }

    /* Dark Mode */
    media (prefers-color-scheme: dark) {
        body

    {
        background-color: var(--bg-dark);
        color: var(--text-dark);
    }

    .custom-card {
        background: var(--card-dark);
        box-shadow: 0px 4px 15px rgba(0, 200, 255, 0.2);
    }

    .custom-btn {
        background: var(--primary-dark);
        color: white;
        border: none;
    }

    .custom-btn-outline {
        border: 2px solid var(--primary-dark);
        color: var(--primary-dark);
    }

        .custom-btn:hover, .custom-btn-outline:hover {
            box-shadow: 0 0 10px var(--primary-dark);
        }

    .custom-label {
        color: var(--label-dark);
    }

    }

    /* Light Mode */
    .custom-card {
        background: var(--card-light);
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
    }

    .custom-btn {
        background: var(--primary-light);
        color: white;
    }

    .custom-btn-outline {
        border: 2px solid var(--primary-light);
        color: var(--primary-light);
    }

        .custom-btn:hover, .custom-btn-outline:hover {
            box-shadow: 0 0 10px var(--primary-light);
        }

    .custom-img {
        max-width: 100px;
        border-radius: 8px;
        border: 2px solid var(--primary-light);
        transition: 0.3s ease-in-out;
    }

    .custom-label {
        color: var(--label-light);
    }

    .custom-input:focus {
        border-color: var(--primary-light);
        box-shadow: 0 0 8px var(--primary-light);
    }

    /* Reduced Spacing for Compact Design */
    .small-text {
        font-size: 0.9rem;
    }

    .small-textarea {
        height: 80px !important;
    }
</style>
